{"version":3,"file":"supermemo.esm.js","sources":["../src/supermemo.ts"],"sourcesContent":["export type SuperMemoItem = {\n  interval: number;\n  repetition: number;\n  efactor: number;\n};\n\nexport type SuperMemoGrade = 0 | 1 | 2 | 3 | 4 | 5;\n\nexport function supermemo(\n  item: SuperMemoItem,\n  grade: SuperMemoGrade\n): SuperMemoItem {\n  let nextInterval: number;\n  let nextRepetition: number;\n  let nextEfactor: number;\n\n  if (grade >= 3) {\n    if (item.repetition === 0) {\n      nextInterval = 1;\n      nextRepetition = 1;\n    } else if (item.repetition === 1) {\n      nextInterval = 6;\n      nextRepetition = 2;\n    } else {\n      nextInterval = Math.round(item.interval * item.efactor);\n      nextRepetition = item.repetition + 1;\n    }\n  } else {\n    nextInterval = 1;\n    nextRepetition = 0;\n  }\n\n  nextEfactor =\n    item.efactor + (0.1 - (5 - grade) * (0.08 + (5 - grade) * 0.02));\n\n  if (nextEfactor < 1.3) nextEfactor = 1.3;\n\n  return {\n    interval: nextInterval,\n    repetition: nextRepetition,\n    efactor: nextEfactor,\n  };\n}\n"],"names":["supermemo","item","grade","nextInterval","nextRepetition","nextEfactor","repetition","Math","round","interval","efactor"],"mappings":"SAQgBA,UACdC,MACAC;AAEA,MAAIC,YAAJ;AACA,MAAIC,cAAJ;AACA,MAAIC,WAAJ;;AAEA,MAAIH,KAAK,IAAI,CAAb,EAAgB;AACd,QAAID,IAAI,CAACK,UAAL,KAAoB,CAAxB,EAA2B;AACzBH,MAAAA,YAAY,GAAG,CAAf;AACAC,MAAAA,cAAc,GAAG,CAAjB;AACD,KAHD,MAGO,IAAIH,IAAI,CAACK,UAAL,KAAoB,CAAxB,EAA2B;AAChCH,MAAAA,YAAY,GAAG,CAAf;AACAC,MAAAA,cAAc,GAAG,CAAjB;AACD,KAHM,MAGA;AACLD,MAAAA,YAAY,GAAGI,IAAI,CAACC,KAAL,CAAWP,IAAI,CAACQ,QAAL,GAAgBR,IAAI,CAACS,OAAhC,CAAf;AACAN,MAAAA,cAAc,GAAGH,IAAI,CAACK,UAAL,GAAkB,CAAnC;AACD;AACF,GAXD,MAWO;AACLH,IAAAA,YAAY,GAAG,CAAf;AACAC,IAAAA,cAAc,GAAG,CAAjB;AACD;;AAEDC,EAAAA,WAAW,GACTJ,IAAI,CAACS,OAAL,IAAgB,MAAM,CAAC,IAAIR,KAAL,KAAe,OAAO,CAAC,IAAIA,KAAL,IAAc,IAApC,CAAtB,CADF;AAGA,MAAIG,WAAW,GAAG,GAAlB,EAAuBA,WAAW,GAAG,GAAd;AAEvB,SAAO;AACLI,IAAAA,QAAQ,EAAEN,YADL;AAELG,IAAAA,UAAU,EAAEF,cAFP;AAGLM,IAAAA,OAAO,EAAEL;AAHJ,GAAP;AAKD;;;;"}