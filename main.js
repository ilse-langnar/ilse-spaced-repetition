(()=>{var t={948:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-arrow-right",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("path",{attrs:{d:"M5 12h14M13 18l6-6M13 6l6 6"}})]))}}},19:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-browser",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("rect",{attrs:{x:"4",y:"4",width:"16",height:"16",rx:"1"}}),s("path",{attrs:{d:"M4 8h16M8 4v4"}})]))}}},966:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-calendar-time",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("path",{attrs:{d:"M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"}}),s("circle",{attrs:{cx:"18",cy:"18",r:"4"}}),s("path",{attrs:{d:"M15 3v4M7 3v4M3 11h16M18 16.496V18l1 1"}})]))}}},407:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-play-card",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("rect",{attrs:{transform:"rotate(90 12 12)",x:"3",y:"5",width:"18",height:"14",rx:"2"}}),s("path",{attrs:{d:"M8 6h.01M16 18h.01M12 16l-3-4 3-4 3 4z"}})]))}}},132:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-chart-bar",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("rect",{attrs:{x:"3",y:"12",width:"6",height:"8",rx:"1"}}),s("rect",{attrs:{x:"9",y:"8",width:"6",height:"12",rx:"1"}}),s("rect",{attrs:{x:"15",y:"4",width:"6",height:"16",rx:"1"}}),s("path",{attrs:{d:"M4 20h14"}})]))}}},554:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-checks",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("path",{attrs:{d:"M7 12l5 5L22 7M2 12l5 5m5-5l5-5"}})]))}}},390:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-download",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("path",{attrs:{d:"M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 11l5 5 5-5M12 4v12"}})]))}}},598:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-equal",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("path",{attrs:{d:"M5 9h14M5 15h14"}})]))}}},177:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-eye",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("circle",{attrs:{cx:"12",cy:"12",r:"2"}}),s("path",{attrs:{d:"M22 12c-2.667 4.667-6 7-10 7s-7.333-2.333-10-7c2.667-4.667 6-7 10-7s7.333 2.333 10 7"}})]))}}},843:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-git-fork",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 24h24V0H0z",stroke:"none"}}),s("circle",{attrs:{cx:"12",cy:"18",r:"2",transform:"matrix(1 0 0 -1 0 24)"}}),s("circle",{attrs:{cx:"7",cy:"6",r:"2",transform:"matrix(1 0 0 -1 0 24)"}}),s("circle",{attrs:{cx:"17",cy:"6",r:"2",transform:"matrix(1 0 0 -1 0 24)"}}),s("path",{attrs:{d:"M7 16v-2a2 2 0 012-2h6a2 2 0 012 2v2M12 12V8"}})]))}}},995:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-list-search",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("circle",{attrs:{cx:"15",cy:"15",r:"4"}}),s("path",{attrs:{d:"M18.5 18.5L21 21M4 6h16M4 12h4M4 18h4"}})]))}}},397:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-plus",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("path",{attrs:{d:"M12 5v14M5 12h14"}})]))}}},275:t=>{t.exports={functional:!0,render(t,e){const{_c:s,_v:n,data:i,children:a=[]}=e,{class:r,staticClass:o,style:c,staticStyle:l,attrs:d={},...h}=i;return s("svg",{class:["icon icon-tabler icon-tabler-settings",r,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},d),...h},a.concat([s("path",{attrs:{d:"M0 0h24v24H0z",stroke:"none"}}),s("path",{attrs:{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37 1 .608 2.296.07 2.572-1.065z"}}),s("circle",{attrs:{cx:"12",cy:"12",r:"3"}})]))}}},704:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var n=s(81),i=s.n(n),a=s(645),r=s.n(a)()(i());r.push([t.id,"\n.clear[data-v-2380d2d8] {\n    clear: both;\n    height: 20px;\n}\n.centered-text[data-v-2380d2d8] {\n    text-align: center;\n    width: 100%;\n}\n.spaced-repetition[data-v-2380d2d8] {\n    cursor: alias;\n    width: 99%;\n}\n.spaced-repetition .import[data-v-2380d2d8] {\n    margin-left: 10px;\n}\n.setting[data-v-2380d2d8] {\n    cursor: pointer;\n}\n\n",""]);const o=r},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",n=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),n&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),n&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,n,i,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(n)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(r[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);n&&r[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),s&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=s):d[2]=s),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),e.push(d))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},379:t=>{"use strict";var e=[];function s(t){for(var s=-1,n=0;n<e.length;n++)if(e[n].identifier===t){s=n;break}return s}function n(t,n){for(var a={},r=[],o=0;o<t.length;o++){var c=t[o],l=n.base?c[0]+n.base:c[0],d=a[l]||0,h="".concat(l," ").concat(d);a[l]=d+1;var u=s(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var _=i(p,n);n.byIndex=o,e.splice(o,0,{identifier:h,updater:_,references:1})}r.push(h)}return r}function i(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,i){var a=n(t=t||[],i=i||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var o=s(a[r]);e[o].references--}for(var c=n(t,i),l=0;l<a.length;l++){var d=s(a[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=c}}},569:t=>{"use strict";var e={};t.exports=function(t,s){var n=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,s)=>{"use strict";t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var i=void 0!==s.layer;i&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,i&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var a=s.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},457:(t,e,s)=>{"use strict";function n(t,e){var s,n,i;return e>=3?0===t.repetition?(s=1,n=1):1===t.repetition?(s=6,n=2):(s=Math.round(t.interval*t.efactor),n=t.repetition+1):(s=1,n=0),(i=t.efactor+(.1-(5-e)*(.08+.02*(5-e))))<1.3&&(i=1.3),{interval:s,repetition:n,efactor:i}}s.r(e),s.d(e,{supermemo:()=>n})},303:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>L});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spaced-repetition"},[s("p",{staticClass:"is-size-1"},[t._v("Flashcards")]),s("p",{staticClass:"is-size-3"},[t._v("335 Cards due today: "+t._s(t.get_today_date()))]),s("button",{staticClass:"button is-active",on:{click:t.open_flashcards_modal}},[t._v("Start")]),s("button",{staticClass:"button",on:{click:t.open_flashcards_configuration_modal}},[t._v("Configuration")]),s("br"),s("div",{directives:[{name:"show",rawName:"v-show",value:"back"===t.location,expression:"location === 'back' "}],staticClass:"back"},[s("p",{staticClass:"is-size-3 centered-text"},[t._v(t._s(t.today[t.pointer]))]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(1)}}},[t._v("Very Hard(1)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(2)}}},[t._v("Hard(2)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(3)}}},[t._v("Good(3)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(4)}}},[t._v("Easy(4)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(5)}}},[t._v("Very Easy(5)")]),s("br"),s("br"),s("ArrowRight",{staticStyle:{width:"40px",cursor:"pointer",border:"1px solid #aaa","border-radius":"10px"},attrs:{title:"Skip"},on:{click:t.next}}),s("br")],1),s("br")])};n._withStripped=!0;var i=s(821),a=s.n(i),r=s(397),o=s.n(r),c=s(554),l=s.n(c),d=s(598),h=s.n(d),u=s(948),p=s.n(u),_=s(390),v=s.n(_),f=s(275),g=s.n(f),y=s(132),m=s.n(y),w=s(19),b=s.n(w),x=s(407),k=s.n(x);console.log;class C extends Plugin{constructor(){super()}}const{supermemo:M}=s(457),S={name:"SpacedRepetitionHome",components:{Plus:o(),Checks:l(),Equal:h(),ArrowRight:p(),Download:v(),Settings:g(),ChartBar:m(),Browser:b(),Card:k()},data:()=>({decks:[],plugin:new C,location:"front",editor:null,pointer:0,content:"",errors:[],answer_time:+new Date,today:[],data:{},is_cloze:!1,user_cloze_input:"",cloze:"",distance:-1,cloze_stage:"init",box:{},focused_box:{}}),methods:{open_flashcards_modal(){new this.plugin.classes.Box({type:"spaced-repetition"}),this.plugin.run_command("open-spaced-repetition-modal")},open_flashcards_configuration_modal(){this.plugin.run_command("open-search-files-modal")},get_today_date(){let t=new Date;return`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`},add_new_deck(){this.decks.push({name:Math.random().toString()})},open_file(t){let e=this.plugin.focused.column,s=new(0,this.plugin.classes.Box)({props:{file:t}});e.add_box(s)},test(){this.box.id=Math.random()},set_box(){let t=this.today[this.pointer],e=new this.plugin.classes.Box({type:"text-editor",props:{file:t}});return this.box=e,this.plugin.focus_on_box(e),this.test(),e},levenshtein(t="",e=""){const s=Array(e.length+1).fill(null).map((()=>Array(t.length+1).fill(null)));for(let e=0;e<=t.length;e+=1)s[0][e]=e;for(let t=0;t<=e.length;t+=1)s[t][0]=t;for(let n=1;n<=e.length;n+=1)for(let i=1;i<=t.length;i+=1){const a=t[i-1]===e[n-1]?0:1;s[n][i]=Math.min(s[n][i-1]+1,s[n-1][i]+1,s[n-1][i-1]+a)}return s[e.length][t.length]},compare_cloze(){let t=this.user_cloze_input,e=this.content.split("{{c1::")[1].replace("}}","");this.cloze=e;let s=this.levenshtein(t,e);this.distance=s,this.cloze_stage="final"},check_is_cloze(t){t&&t.indexOf&&-1!==t.indexOf("{{c1::")&&(this.is_cloze=!0,this.plugin.set_mode("Insert"))},previous(){this.pointer--,this.answer_time=+new Date,this.location="front",this.save()},async next(){this.pointer++,this.answer_time=+new Date,this.location="front",this.content=await this.plugin.filesystem.file.get(this.today[this.pointer]),this.check_is_cloze(this.content),this.user_cloze_input="",this.cloze_stage="init",this.is_cloze=!1,this.cloze="",this.set_box(),this.save()},async save(){let t=this.data;await this.plugin.save(t,!0),this.plugin.Messager.emit("status-line","set","Saved Spaced repetition schedules")},get_card_schedule(t){return this.data.schedules[t]?this.data.schedules[t]:null},add_schedule(t,e){this.get_card_schedule(t),this.data.schedules[t]={reviews:[],supermemo_item:e,answer_time:e.answer_time,date:+new Date,interval:e.interval,repetition:e.repetition,efactor:e.efactor},this.data.schedules[t].reviews.push(e)},add_review(t){let e,s=this.today[this.pointer],n=this.get_card_schedule(s);e=n?{interval:n.interval,repetition:n.reviews.length||1,efactor:n.efactor}:{interval:1,repetition:1,efactor:2.5};let i=M(e,t);i.answer_time=(new Date).getTime()-this.answer_time,this.add_schedule(s,i),this.next()},reveal_front(){this.set_box(),this.location="front"},reveal_back(){this.location="back"},flip(){"front"===this.location?this.reveal_back():this.reveal_front()},async set_cards_for_today(){this.data=await this.plugin.load();let t,e=this.data.files;this.plugin.Messager.emit("status-line","set","Getting today's flashcards ...");for(let s of e)t=this.get_card_schedule(s),t||this.today.push(s),t&&t.interval<=2&&this.today.push(s);this.today=a()(this.today),this.content=await this.plugin.filesystem.file.get(this.today[this.pointer]),this.check_is_cloze(this.content),this.set_box(),this.plugin.Messager.emit("status-line","set","Getting today's flashcards: DONE")},decay_all_card_schedules(){let t,e,s=this.data.schedules,n=Object.keys(s),i=0;for(const a of Object.values(s))i++,t=n[i],t&&(e=s[t],this.data.schedules[t].interval>=1&&this.data.schedules[t].interval--);this.save()},get_last_decay_date(){let t,e=this.data.decay_history;return 0===e.length?null:(t=e[e.length-1],t)},async decay_cards_today(){let t=this.get_last_decay_date();var e=(new Date).toLocaleDateString();t===e||(this.decay_all_card_schedules(),this.data.decay_history.push(e)),await this.save()},setup(){}},mounted(){this.setup()}},z=S;var j=s(379),O=s.n(j),R=s(795),E=s.n(R),H=s(569),T=s.n(H),D=s(565),A=s.n(D),N=s(216),P=s.n(N),$=s(589),V=s.n($),B=s(704),G={};G.styleTagTransform=V(),G.setAttributes=A(),G.insert=T().bind(null,"head"),G.domAPI=E(),G.insertStyleElement=P(),O()(B.Z,G),B.Z&&B.Z.locals&&B.Z.locals;var I=(0,s(900).Z)(z,n,[],!1,null,"2380d2d8",null);I.options.__file="src/Home.vue";const L=I.exports},49:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>l});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"review"},[s("p",{staticClass:"is-size-1"},[t._v("Review")]),s("div",{directives:[{name:"show",rawName:"v-show",value:"back"===t.location,expression:"location === 'back' "}],staticClass:"back"},[s("p",{staticClass:"is-size-3 centered-text"},[t._v(t._s(t.today[t.pointer]))]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(1)}}},[t._v("Very Hard(1)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(2)}}},[t._v("Hard(2)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(3)}}},[t._v("Good(3)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(4)}}},[t._v("Easy(4)")]),s("button",{staticClass:"button",on:{click:function(e){return t.add_review(5)}}},[t._v("Very Easy(5)")]),s("br"),s("br"),s("ArrowRight",{staticStyle:{width:"40px",cursor:"pointer",border:"1px solid #aaa","border-radius":"10px"},attrs:{title:"Skip"},on:{click:t.next}}),s("br")],1),s("br")])};n._withStripped=!0;var i=s(948),a=s.n(i);console.log;class r extends Plugin{constructor(){super()}}const o={name:"Review",data:()=>({decks:[],plugin:new r,location:"front",editor:null,pointer:0,content:"",errors:[],answer_time:+new Date,today:[],data:{},is_cloze:!1,user_cloze_input:"",cloze:"",distance:-1,cloze_stage:"init",box:{},focused_box:{}}),components:{ArrowRight:a()},computed:{},methods:{add_new_deck(){this.decks.push({name:Math.random().toString()})},open_file(t){let e=this.plugin.focused.column,s=new(0,this.plugin.classes.Box)({props:{file:t}});e.add_box(s)},test(){this.box.id=Math.random()},set_box(){let t=this.today[this.pointer],e=new this.plugin.classes.Box({type:"text-editor",props:{file:t}});return this.box=e,this.plugin.focus_on_box(e),this.test(),e},levenshtein(t="",e=""){const s=Array(e.length+1).fill(null).map((()=>Array(t.length+1).fill(null)));for(let e=0;e<=t.length;e+=1)s[0][e]=e;for(let t=0;t<=e.length;t+=1)s[t][0]=t;for(let n=1;n<=e.length;n+=1)for(let i=1;i<=t.length;i+=1){const a=t[i-1]===e[n-1]?0:1;s[n][i]=Math.min(s[n][i-1]+1,s[n-1][i]+1,s[n-1][i-1]+a)}return s[e.length][t.length]},compare_cloze(){let t=this.user_cloze_input,e=this.content.split("{{c1::")[1].replace("}}","");this.cloze=e;let s=this.levenshtein(t,e);this.distance=s,this.cloze_stage="final"},check_is_cloze(t){t&&t.indexOf&&-1!==t.indexOf("{{c1::")&&(this.is_cloze=!0,this.plugin.set_mode("Insert"))},previous(){this.pointer--,this.answer_time=+new Date,this.location="front",this.save()},async next(){this.pointer++,this.answer_time=+new Date,this.location="front",this.content=await this.plugin.filesystem.file.get(this.today[this.pointer]),this.check_is_cloze(this.content),this.user_cloze_input="",this.cloze_stage="init",this.is_cloze=!1,this.cloze="",this.set_box(),this.save()},async save(){let t=this.data;await this.plugin.save(t,!0),this.plugin.Messager.emit("status-line","set","Saved Spaced repetition schedules")},get_card_schedule(t){return this.data.schedules[t]?this.data.schedules[t]:null},add_schedule(t,e){this.get_card_schedule(t),this.data.schedules[t]={reviews:[],supermemo_item:e,answer_time:e.answer_time,date:+new Date,interval:e.interval,repetition:e.repetition,efactor:e.efactor},this.data.schedules[t].reviews.push(e)},add_review(t){let e,s=this.today[this.pointer],n=this.get_card_schedule(s);e=n?{interval:n.interval,repetition:n.reviews.length||1,efactor:n.efactor}:{interval:1,repetition:1,efactor:2.5};let i=supermemo(e,t);i.answer_time=(new Date).getTime()-this.answer_time,this.add_schedule(s,i),this.next()},reveal_front(){this.set_box(),this.location="front"},reveal_back(){this.location="back"},flip(){"front"===this.location?this.reveal_back():this.reveal_front()},async set_cards_for_today(){this.data=await this.plugin.load();let t,e=this.data.files;this.plugin.Messager.emit("status-line","set","Getting today's flashcards ...");for(let s of e)t=this.get_card_schedule(s),t||this.today.push(s),t&&t.interval<=2&&this.today.push(s);this.today=shuffle_array(this.today),this.content=await this.plugin.filesystem.file.get(this.today[this.pointer]),this.check_is_cloze(this.content),this.set_box(),this.plugin.Messager.emit("status-line","set","Getting today's flashcards: DONE")},decay_all_card_schedules(){let t,e,s=this.data.schedules,n=Object.keys(s),i=0;for(const a of Object.values(s))i++,t=n[i],t&&(e=s[t],this.data.schedules[t].interval>=1&&this.data.schedules[t].interval--);this.save()},get_last_decay_date(){let t,e=this.data.decay_history;return 0===e.length?null:(t=e[e.length-1],t)},async decay_cards_today(){let t=this.get_last_decay_date();var e=(new Date).toLocaleDateString();t===e||(this.decay_all_card_schedules(),this.data.decay_history.push(e)),await this.save()},async init(){let t=await this.plugin.load();this.cards=t.files},setup(){}},mounted(){this.setup()}};var c=(0,s(900).Z)(o,n,[],!1,null,null,null);c.options.__file="src/Review.vue";const l=c.exports},930:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>w});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spaced-repetition ilse-modal"},[s("br"),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2 sections"},[s("div",{staticClass:"item",style:t.get_option_style("review"),on:{click:function(e){return t.select_option("review")}}},[s("Eye"),s("p",[t._v("Review")])],1),s("div",{staticClass:"item",style:t.get_option_style("cards"),on:{click:function(e){return t.select_option("cards")}}},[s("Card"),s("p",[t._v("Cards")])],1),s("div",{staticClass:"item",style:t.get_option_style("scan"),on:{click:function(e){return t.select_option("scan")}}},[s("ListSearch"),s("p",[t._v("Scan")])],1),s("div",{staticClass:"item",style:t.get_option_style("schedules"),on:{click:function(e){return t.select_option("schedules")}}},[s("CalendarTime"),s("p",[t._v("Schedules")])],1),s("div",{staticClass:"item",style:t.get_option_style("statistics"),on:{click:function(e){return t.select_option("statistics")}}},[s("ChartBar"),s("p",[t._v("Statistics")])],1),s("div",{staticClass:"item",style:t.get_option_style("knowledge-tree"),on:{click:function(e){return t.select_option("knowledge-tree")}}},[s("GitTree"),s("p",[t._v("Knowledge Tree")])],1)]),s("div",{staticClass:"column is-10"},["review"===t.selected_option?s("div",{staticClass:"option"},[s("Review")],1):t._e(),"cards"===t.selected_option?s("div",{staticClass:"option"},[s("p",{staticClass:"is-size-1"},[t._v("Cards")]),t._l(t.cards,(function(e,n){return s("div",{key:n,staticClass:"loop"},[s("p",[t._v("card: "+t._s(e))])])}))],2):t._e()])])])};n._withStripped=!0;var i=s(49),a=s(177),r=s.n(a),o=s(407),c=s.n(o),l=s(995),d=s.n(l),h=s(966),u=s.n(h),p=s(132),_=s.n(p),v=s(843),f=s.n(v);console.log;class g extends Plugin{constructor(){super()}}const y={name:"SpacedRepetitionPluginReview",data:()=>({plugin:new g,selected_option:"review",cards:[]}),components:{Review:i.default,Eye:r(),Card:c(),ListSearch:d(),CalendarTime:u(),ChartBar:_(),GitTree:f()},computed:{},methods:{select_option(t){this.selected_option=t},get_option_style(t){let e="";return this.selected_option===t&&(e+="background: #e9e9e9;"),e},async init(){let t=await this.plugin.load();this.cards=t.files},setup(){}},mounted(){this.setup()}};var m=(0,s(900).Z)(y,n,[],!1,null,null,null);m.options.__file="src/SpacedRepetition.vue";const w=m.exports},900:(t,e,s)=>{"use strict";function n(t,e,s,n,i,a,r,o){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=s,l._compiled=!0),n&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):i&&(c=o?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:l}}s.d(e,{Z:()=>n})},821:t=>{t.exports=function(t){let e=t.length;for(;0!==e;){let s=Math.floor(Math.random()*e);e-=1;let n=t[e];t[e]=t[s],t[s]=n}return t}}},e={};function s(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={id:n,exports:{}};return t[n](a,a.exports,s),a.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{class t extends Plugin{constructor(){super(),console.log,this.setup()}setup(){let t=this,e=this.add_box({id:"spaced-repetition-home",name:"Spaced Repetition Home",type:"vue",component:s(303),props:{}}),n=this.add_box({id:"spaced-repetition",name:"Spaced Repetition",type:"vue",component:s(930),props:{}});this.add_box({id:"spaced-repetition-review",name:"Spaced Repetition Review",type:"vue",component:s(49),props:{}}),this.add_modal({id:"spaced-repetition",name:"Spaced Repetition",box:n,props:{box:{},modal:{height:"80%",width:"70%",style:"border-radius: 10px;",scrollable:!1}}}),this.add_command({id:"open-spaced-repetition-modal",name:"Open spaced repetition modal",description:"Will open the spaced repetition plugin modal",fn:function(){t.Messager.emit("modals.vue","open",{target:"spaced-repetition"})}}),this.add_popover({id:"spaced-repetition-main",name:"Spacec Repetition Main",width:300,position:"top",activation_event:"click",box_type:e}),this.add_plugin_menu_item({id:"spaced-repetition",name:"Spaced Repetition",popover:{id:"spaced-repetition-main",position:"top"},img:"calendar-time.svg",description:"Open Spaced Repetition Modal",command:"",has_space:!1})}async init(){await this.add_flashcards(),await s(303)}async load(){return await this.load()}async save(t){return await this.save(t)}async add_flashcards(){if(this.data=await this.load(),this.data)return;let t=[];this.graph.forEachNode((e=>{e.data&&e.data.tags&&e.data.tags.length&&-1!==e.data.tags.indexOf(TAG_NAME)&&t.push(e)})),this.save({nodes:t,version:1})}}new t})()})();